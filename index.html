<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>Chess Tracker 2026</title>
  <meta name="description" content="Track your chess matches and analyze your performance over time" />
  <meta name="keywords" content="chess tracker, chess matches, rating tracking, chess analytics" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@600;700&family=Space+Grotesk:wght@600;700&display=swap"
    rel="stylesheet">

  <!-- Styles -->
  <style>
    /* ===== RESET & BASE STYLES ===== */
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* ===== CSS VARIABLES ===== */
    
    /* Spacing Variables */
    :root {
      --spacing-form-group: clamp(1.25rem, 3cqh, 1.5rem);
      --spacing-label: clamp(0.5rem, 1.5cqh, 0.625rem);
      --spacing-section: clamp(1.5rem, 3cqh, 2rem);
    }

    /* ===== TYPOGRAPHY & LAYOUT ===== */

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #000000;
      min-height: 100vh;
      padding: clamp(1rem, 3vw, 2rem);
      color: #f8f9fa;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      -webkit-tap-highlight-color: transparent;
      overscroll-behavior: none;
    }

    /* iOS Safe Area support for single-column mode */
    @supports (padding: max(0px)) {
      body {
        padding-left: max(1rem, env(safe-area-inset-left));
        padding-right: max(1rem, env(safe-area-inset-right));
        padding-top: max(1rem, env(safe-area-inset-top));
        padding-bottom: max(1rem, env(safe-area-inset-bottom));
      }
    }

    /* Form Container */
    .form-container {
      max-width: clamp(300px, 90vw, 900px);
      margin: 0 auto;
      background: #1a1a1a;
      border-radius: 16px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
      padding: clamp(1.25rem, 5cqw, 2.5rem);
      border: 1px solid #2a2a2a;
      container-type: inline-size;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .form-container:hover {
      border-color: #3a3a3a;
      transform: translateY(-2px);
    }

    /* Typography */
    h1 {
      font-family: 'Space Grotesk', sans-serif;
      color: #f8f9fa;
      text-align: center;
      margin-bottom: var(--spacing-label);
      font-size: clamp(1.1rem, 6cqw, 3rem);
      font-weight: 700;
      line-height: 1.2;
      letter-spacing: 0.02em;
      text-transform: uppercase;
      white-space: nowrap;
      cursor: pointer;
      user-select: none;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    h1:hover {
      color: #7c3aed;
      transform: scale(1.02);
    }

    h1:active {
      transform: scale(0.98);
    }

    .subtitle {
      font-family: 'Inter', sans-serif;
      text-align: center;
      color: rgba(248, 249, 250, 0.7);
      margin-bottom: var(--spacing-section);
      font-size: clamp(0.9rem, 3cqw, 1rem);
      font-weight: 500;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .single-column .subtitle {
      color: rgba(124, 58, 237, 0.8);
      font-weight: 600;
    }

    /* Form Elements */
    .form-group {
      margin-bottom: var(--spacing-form-group);
      position: relative;
    }

    label {
      display: block;
      margin-bottom: var(--spacing-label);
      font-weight: 600;
      color: #f8f9fa;
      font-size: clamp(0.85rem, 2.5cqw, 0.9rem);
      line-height: 1.5;
      letter-spacing: -0.01em;
    }

    input[type='text'],
    input[type='number'],
    textarea {
      width: 100%;
      padding: clamp(0.625rem, 2.5cqh, 0.75rem) clamp(0.75rem, 3cqw, 1rem);
      border: 1px solid #2a2a2a;
      border-radius: 10px;
      font-size: clamp(0.9rem, 3.5cqw, 1rem);
      font-family: 'Inter', sans-serif;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      background: #000000;
      color: #f8f9fa;
    }

    /* Gray placeholder text for inputs and textarea */
    input::placeholder,
    textarea::placeholder {
      color: #6b7280;
      opacity: 1;
    }

    input::-webkit-input-placeholder,
    textarea::-webkit-input-placeholder {
      color: #6b7280;
      opacity: 1;
    }

    input::-moz-placeholder,
    textarea::-moz-placeholder {
      color: #6b7280;
      opacity: 1;
    }

    select {
      width: 100%;
      padding: 0;
      padding-left: clamp(0.75rem, 3cqw, 1rem);
      padding-right: clamp(2.75rem, 7cqw, 3.25rem);
      height: clamp(2.5rem, 8cqh, 3rem);
      border: 1px solid #2a2a2a;
      border-radius: 10px;
      font-size: clamp(0.9rem, 3.5cqw, 1rem);
      font-family: 'Inter', sans-serif;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      background: #000000;
      color: #f8f9fa;
      text-align: right;
      text-align-last: right;
      direction: ltr;
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 12 12'%3E%3Cpath fill='%23f8f9fa' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 0.75rem center;
      background-size: 14px;
      line-height: clamp(2.5rem, 8cqh, 3rem);
      vertical-align: middle;
    }

    /* Keep time limit selects centered */
    #timeLimitMinutes,
    #timeLimitSeconds {
      text-align: center;
      text-align-last: center;
      padding-left: clamp(0.5rem, 2cqw, 0.75rem);
      padding-right: clamp(1.75rem, 5cqw, 2rem);
      background-position: right 0.5rem center;
      height: clamp(2.5rem, 8cqh, 3rem);
      line-height: clamp(2.5rem, 8cqh, 3rem);
    }

    /* Style selects when showing placeholder (required and invalid) */
    select:required:invalid,
    select.placeholder-shown {
      color: #6b7280;
    }

    /* Gray color for placeholder options */
    select option[value=""] {
      color: #6b7280;
    }

    /* White color for actual options */
    select option:not([value=""]) {
      color: #f8f9fa;
    }

    /* Options in dropdown should be left-aligned */
    select option {
      text-align: left;
      direction: ltr;
    }

    /* Custom File Input Styling */
    input[type='file'] {
      width: 100%;
      padding: clamp(0.625rem, 2.5cqh, 0.75rem) clamp(0.75rem, 3cqw, 1rem);
      border: 1px solid #2a2a2a;
      border-radius: 10px;
      font-size: clamp(0.9rem, 3.5cqw, 1rem);
      font-family: 'Inter', sans-serif;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      background: #000000;
      color: #f8f9fa;
      cursor: pointer;
    }

    input[type='file']:hover {
      border-color: #3a3a3a;
      transform: translateY(-2px);
    }

    input[type='file']:focus {
      outline: none;
      border-color: #7c3aed;
      box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.2);
    }

    /* Style the file input button */
    input[type='file']::file-selector-button {
      background: #7c3aed;
      color: white;
      border: none;
      padding: clamp(0.375rem, 1.5cqh, 0.5rem) clamp(0.625rem, 2.5cqw, 0.75rem);
      border-radius: 8px;
      margin-right: clamp(0.5rem, 2cqw, 0.75rem);
      cursor: pointer;
      font-size: clamp(0.8rem, 3cqw, 0.875rem);
      font-weight: 600;
      font-family: 'Inter', sans-serif;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    input[type='file']::file-selector-button:hover {
      background: #6d28d9;
      transform: translateY(-2px);
    }

    input[type='text']:focus,
    input[type='number']:focus,
    textarea:focus {
      outline: none;
      border-color: #7c3aed;
      box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.2);
      transform: translateY(-2px);
    }

    input[type='text']:hover,
    input[type='number']:hover,
    textarea:hover,
    select:hover {
      border-color: #3a3a3a;
    }

    select:focus {
      outline: none;
      border-color: #7c3aed;
      box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.2);
      transform: translateY(-2px);
    }

    textarea {
      resize: vertical;
      min-height: 80px;
    }

    /* Time Limit Container */
    .time-limit-container {
      display: flex;
      align-items: center;
      gap: clamp(.5px, 1cqw, 6px);
      width: 100%;
    }

    .time-limit-container select {
      flex: 1;
      min-width: 0;
      padding: clamp(0.625rem, 2.5cqh, 0.75rem) clamp(0.5rem, 2cqw, 0.75rem);
      text-align: center;
      box-sizing: border-box;
      font-size: clamp(0.9rem, 3.5cqw, 1rem);
    }

    .time-limit-container select:first-child {
      flex: 1;
      min-width: 64px;
    }

    .time-limit-container select:last-child {
      flex: 1;
      min-width: 64px;
    }

    .time-separator {
      font-weight: bold;
      font-size: clamp(0.9rem, 3.5cqw, 1rem);
      color: #f8f9fa;
      /* remove extra horizontal padding so nearby selects get more width on narrow screens */
      padding: 0;
      flex-shrink: 0;
    }

    /* Two Column Layout */
    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: clamp(10px, 3cqw, 20px);
      align-items: start;
    }

    /* Single Column Layout Override */
    .single-column .form-row {
      grid-template-columns: 1fr;
      transition: grid-template-columns 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .form-row {
      transition: grid-template-columns 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Reset column positioning in single-column mode */
    .single-column #otherWhiteGroup,
    .single-column #otherBlackGroup {
      grid-column: auto;
    }

    /* Visual feedback when in single-column mode */
    .single-column {
      border-left: 3px solid #7c3aed;
      box-shadow: 0 4px 6px rgba(124, 58, 237, 0.15);
    }

    /* Larger labels in single-column mode */
    .single-column label {
      font-size: clamp(1.1rem, 4cqw, 1.3rem);
      font-weight: 700;
      margin-bottom: var(--spacing-label);
      color: #f8f9fa;
    }

    /* Keep checkbox labels smaller */
    .single-column .checkbox-container label {
      font-size: clamp(0.85rem, 2.2cqw, 0.9rem);
      font-weight: 500;
      margin-bottom: 0;
    }

    /* iPhone 13 specific optimizations for single-column mode */
    @media (max-width: 430px) {
      .single-column {
        /* Optimize spacing for iPhone 13 (390px width) */
        padding: clamp(1rem, 4vw, 1.5rem);
      }

      .single-column h1 {
        font-size: clamp(1.25rem, 4.5vw, 1.6rem);
        margin-bottom: 0.75rem;
        letter-spacing: -0.03em;
        word-spacing: -0.15em;
        line-height: 1.2;
        white-space: normal;
        overflow-wrap: break-word;
        hyphens: manual;
      }

      .single-column h1::after {
        content: ' üì±';
        font-size: 0.65em;
        opacity: 0.7;
        display: inline-block;
        margin-left: 0.1em;
        white-space: nowrap;
      }

      .single-column .subtitle {
        font-size: clamp(0.95rem, 3.5vw, 1.05rem);
        margin-bottom: 1.5rem;
      }

      .single-column .form-group {
        margin-bottom: 1.5rem;
      }

      .single-column label {
        font-size: clamp(1.15rem, 4.5vw, 1.35rem);
        margin-bottom: 0.625rem;
        letter-spacing: -0.02em;
      }

      .single-column input[type='text'],
      .single-column input[type='number'],
      .single-column textarea {
        font-size: clamp(1rem, 4vw, 1.1rem);
        padding: 0.875rem 1rem;
        min-height: 48px;
        border-width: 1.5px;
      }

      .single-column select {
        font-size: clamp(1rem, 4vw, 1.1rem);
        padding: 0;
        padding-left: 1rem;
        padding-right: 3rem;
        height: 48px;
        border-width: 1.5px;
        background-position: right 0.875rem center;
        background-size: 16px;
        line-height: 48px;
      }

      .single-column .checkbox-container {
        padding: 0.75rem 1rem;
        min-height: 48px;
      }

      .single-column .checkbox-container input[type='checkbox'] {
        width: 22px;
        height: 22px;
      }

      .single-column .checkbox-container label {
        font-size: 1rem;
      }

      .single-column .result-option {
        padding: 0.875rem 1.25rem;
        min-height: 48px;
        font-size: 1rem;
      }

      .single-column .result-option input[type='radio'] {
        width: 22px;
        height: 22px;
      }

      .single-column .submit-btn {
        padding: 1rem;
        font-size: 1.1rem;
        min-height: 52px;
        margin-top: 1.5rem;
      }

      .single-column .slider-labels {
        font-size: 0.95rem;
        margin-bottom: 0.75rem;
      }

      .single-column .slider-value {
        font-size: 1.1rem;
        margin-top: 0.75rem;
      }

      .single-column input[type='range'] {
        height: 8px;
      }

      .single-column input[type='range']::-webkit-slider-thumb {
        width: 28px;
        height: 28px;
      }

      .single-column input[type='range']::-moz-range-thumb {
        width: 28px;
        height: 28px;
      }

      .single-column .time-limit-container select {
        font-size: 1rem;
        padding: 0;
        padding-left: 0.75rem;
        padding-right: 2rem;
        height: 48px;
        line-height: 48px;
        background-position: right 0.625rem center;
        background-size: 14px;
      }

      .single-column .time-separator {
        font-size: 1.2rem;
      }

      .single-column .help-text {
        font-size: 0.875rem;
      }

      /* Session stats optimizations */
      .single-column #current-session-container {
        padding: clamp(1.125rem, 3.5cqh, 1.5rem);
      }

      .single-column .stat-card-name {
        font-size: 1.2rem;
      }

      /* Better touch feedback on iOS */
      .single-column select,
      .single-column input,
      .single-column textarea,
      .single-column .checkbox-container,
      .single-column .result-option,
      .single-column .submit-btn {
        -webkit-tap-highlight-color: rgba(124, 58, 237, 0.2);
      }

      /* Improve readability with better line height */
      .single-column select,
      .single-column input[type='text'],
      .single-column textarea {
        line-height: 1.5;
      }

      /* Make form feel more native on iOS */
      .single-column input:not([type='checkbox']):not([type='radio']),
      .single-column textarea {
        -webkit-appearance: none;
        appearance: none;
      }

      /* Restore native appearance for checkboxes and radios */
      .single-column input[type='checkbox'],
      .single-column input[type='radio'] {
        -webkit-appearance: auto;
        appearance: auto;
      }

      /* Optimize result buttons for one-handed use */
      .single-column .result-group {
        gap: 0.75rem;
      }

      .single-column .result-option {
        justify-content: flex-start;
        padding-left: 1.5rem;
      }

      /* Improve slider usability */
      .single-column .slider-container {
        margin: 1rem 0;
      }

      /* Better active states for touch feedback */
      .single-column .submit-btn:active {
        transform: scale(0.98);
        opacity: 0.9;
      }

      .single-column .result-option:active,
      .single-column .checkbox-container:active {
        transform: scale(0.98);
      }

      .single-column select:active,
      .single-column input:active,
      .single-column textarea:active {
        border-color: #7c3aed;
      }

      /* Prevent zoom on input focus (iOS) */
      .single-column input[type='text'],
      .single-column input[type='number'],
      .single-column select,
      .single-column textarea {
        font-size: max(16px, 1rem);
      }

      /* Smooth scrolling for better UX */
      .single-column {
        scroll-behavior: smooth;
      }

      /* Optimize file input for touch */
      .single-column input[type='file'] {
        padding: 1rem;
        min-height: 52px;
      }

      .single-column input[type='file']::file-selector-button {
        padding: 0.625rem 1rem;
        font-size: 0.95rem;
        min-height: 40px;
      }
    }

    /* Make mulligan checkboxes stack vertically in single-column mode */
    .single-column .mulligan-checkboxes {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .single-column .mulligan-checkboxes .checkbox-container {
      height: auto;
      min-height: 48px;
      width: 100%;
      padding: 0.75rem 1rem;
    }

    .single-column .mulligan-checkboxes .checkbox-container input[type='checkbox'] {
      width: 22px;
      height: 22px;
      flex-shrink: 0;
      -webkit-appearance: auto;
      appearance: auto;
    }

    /* Force specific positioning for optional Other Player fields
   so the black player input always occupies the second column. */
    #otherWhiteGroup {
      grid-column: 1 / 2;
    }

    #otherBlackGroup {
      grid-column: 2 / 3;
    }

    /* Checkbox Container */
    .checkbox-container {
      display: flex;
      align-items: center;
      gap: clamp(0.375rem, 1.5cqw, 0.5rem);
      padding: clamp(0.5rem, 2cqh, 0.625rem);
      background: #000000;
      border: 1px solid #2a2a2a;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .checkbox-container:hover {
      background: #1a1a1a;
      border-color: #3a3a3a;
      transform: translateY(-2px);
    }

    .checkbox-container input[type='checkbox'] {
      width: 18px;
      height: 18px;
      cursor: pointer;
      accent-color: #7c3aed;
    }

    .checkbox-container label {
      margin: 0;
      cursor: pointer;
      user-select: none;
      font-size: clamp(0.85rem, 2.2cqw, 0.9rem);
      font-weight: 500;
      color: #f8f9fa;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Mulligan Section Layout */
    .mulligan-container {
      display: flex;
      flex-direction: column;
      gap: clamp(4px, 1.5vw, 6px);
    }

    /* Result Radio Buttons */
    .result-group {
      display: flex;
      gap: clamp(0.5rem, 2.5cqw, 0.75rem);
      margin-top: var(--spacing-label);
      flex-wrap: wrap;
    }

    .result-option {
      display: flex;
      align-items: center;
      padding: clamp(0.625rem, 2.5cqh, 0.75rem) clamp(1rem, 4cqw, 1.25rem);
      background: #000000;
      border: 1px solid #2a2a2a;
      border-radius: 10px;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
      flex: 1;
      min-width: clamp(80px, 20cqw, 100px);
      justify-content: center;
    }

    .result-option:hover {
      background: #1a1a1a;
      border-color: #3a3a3a;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }

    .result-option input[type='radio'] {
      width: 18px;
      height: 18px;
      margin-right: clamp(0.375rem, 1.5cqw, 0.5rem);
      cursor: pointer;
      accent-color: #7c3aed;
    }

    .result-option span {
      cursor: pointer;
      user-select: none;
      font-weight: 600;
      font-size: clamp(0.875rem, 2.5cqw, 0.95rem);
      color: #f8f9fa;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .result-option:has(input:checked) {
      background: rgba(124, 58, 237, 0.15);
      border-color: #7c3aed;
      border-width: 2px;
    }

    .result-option.win:has(input:checked) {
      background: rgba(16, 185, 129, 0.15);
      border-color: #10b981;
      border-width: 2px;
    }

    .result-option.loss:has(input:checked) {
      background: rgba(239, 68, 68, 0.15);
      border-color: #ef4444;
      border-width: 2px;
    }

    .result-option.draw:has(input:checked) {
      background: rgba(107, 114, 128, 0.15);
      border-color: #6b7280;
      border-width: 2px;
    }

    /* Help Text Bubble */
    .help-text {
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      background: #1a1a1a;
      border: 1px solid #2a2a2a;
      color: rgba(248, 249, 250, 0.9);
      padding: clamp(0.375rem, 1.5cqh, 0.5rem) clamp(0.625rem, 2.5cqw, 0.75rem);
      border-radius: 8px;
      font-size: clamp(0.75rem, 2cqw, 0.8rem);
      font-family: 'Inter', sans-serif;
      white-space: nowrap;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      margin-bottom: clamp(0.375rem, 1.5cqh, 0.5rem);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
    }

    .help-text::after {
      content: '';
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      border: 5px solid transparent;
      border-top-color: #1a1a1a;
    }

    .help-text.show {
      opacity: 1;
      visibility: visible;
      transform: translateX(-50%) translateY(-5px);
    }

    .help-text.error {
      background: #ef4444;
      border-color: #dc2626;
      color: white;
    }

    .help-text.error::after {
      border-top-color: #ef4444;
    }

    .form-group:hover .help-text:not(.error) {
      opacity: 1;
      visibility: visible;
      transform: translateX(-50%) translateY(-5px);
    }

    /* Slider Styles */
    .slider-container {
      position: relative;
      margin: var(--spacing-label) 0;
    }

    .slider-labels {
      display: flex;
      justify-content: space-between;
      margin-bottom: var(--spacing-label);
      font-size: clamp(0.8rem, 2.2cqw, 0.875rem);
      color: rgba(248, 249, 250, 0.7);
      font-family: 'Inter', sans-serif;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .slider-labels .gentle {
      color: #10b981;
      font-weight: 600;
    }

    .slider-labels .brutal {
      color: #ef4444;
      font-weight: 600;
    }

    input[type='range'] {
      width: 100%;
      height: 6px;
      border-radius: 3px;
      background: linear-gradient(to right, #f59e0b 0%, #f97316 25%, #ef4444 50%, #dc2626 75%, #991b1b 100%);
      outline: none;
      appearance: none;
      -webkit-appearance: none;
    }

    input[type='range']::-webkit-slider-thumb {
      appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #f8f9fa;
      border: 2px solid #7c3aed;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    input[type='range']::-webkit-slider-thumb:hover {
      transform: scale(1.15);
      box-shadow: 0 4px 12px rgba(124, 58, 237, 0.4);
      border-width: 3px;
    }

    input[type='range']::-moz-range-thumb {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #f8f9fa;
      border: 2px solid #7c3aed;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
    }

    .slider-value {
      text-align: center;
      margin-top: var(--spacing-label);
      font-weight: 700;
      font-family: 'JetBrains Mono', monospace;
      color: #f8f9fa;
      font-size: clamp(0.95rem, 2.8cqw, 1.05rem);
      letter-spacing: -0.01em;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Submit Button */
    .submit-btn {
      width: 100%;
      padding: clamp(0.75rem, 3cqh, 1rem);
      background: linear-gradient(135deg, #00d4ff 0%, #7c3aed 50%, #10b981 100%);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: clamp(1rem, 3.2cqw, 1.1rem);
      font-weight: 700;
      font-family: 'Space Grotesk', sans-serif;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      margin-top: clamp(1.5rem, 3cqh, 2rem);
      box-shadow: 0 4px 6px rgba(124, 58, 237, 0.3);
    }

    .submit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 12px rgba(124, 58, 237, 0.5);
      filter: brightness(1.1);
    }

    .submit-btn:active {
      transform: translateY(0);
    }

    .submit-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      body {
        padding: 10px;
        min-height: 100vh;
      }

      .form-container {
        padding: 20px;
        border-radius: 12px;
      }

      h1 {
        font-size: 2em;
        margin-bottom: 12px;
      }

      label {
        font-size: 0.95em;
      }

      .result-group {
        flex-direction: column;
      }

      .result-option {
        min-width: auto;
      }
    }

    @media (max-width: 600px) {
      .form-container {
        padding: 15px;
      }

      h1 {
        font-size: 1.8em;
        margin-bottom: var(--spacing-label);
      }

      label {
        font-size: 0.9em;
      }
    }

    /* Very small screens - maintain 2 columns down to 299px */
    @media (max-width: 500px) {
      .form-row {
        grid-template-columns: 1fr 1fr;
        gap: clamp(4px, 2vw, 8px);
      }

      body {
        padding: clamp(2px, 1vw, 10px);
      }

      .form-container {
        padding: clamp(6px, 2vw, 10px);
      }

      h1 {
        font-size: clamp(1.3em, 5vw, 1.6em);
        margin-bottom: var(--spacing-label);
        font-weight: 700;
      }

      .form-group {
        margin-bottom: var(--spacing-form-group);
      }

      label {
        font-size: clamp(0.85em, 2.8vw, 0.95em);
        margin-bottom: var(--spacing-label);
        font-weight: 600;
      }

      input[type='text'],
      input[type='number'],
      textarea {
        padding: clamp(6px, 2vw, 8px) clamp(8px, 2.5vw, 10px);
        font-size: clamp(13px, 3.5vw, 14px);
      }

      select {
        padding: 0;
        padding-left: clamp(8px, 2.5vw, 10px);
        padding-right: clamp(32px, 8vw, 40px);
        height: clamp(32px, 10vw, 38px);
        line-height: clamp(32px, 10vw, 38px);
        font-size: clamp(13px, 3.5vw, 14px);
      }

      .checkbox-container {
        padding: clamp(4px, 1.5vw, 6px) clamp(6px, 2vw, 8px);
      }

      .mulligan-checkboxes .checkbox-container {
        padding: clamp(0.625rem, 2.5vh, 0.75rem) clamp(0.75rem, 3vw, 1rem);
        min-height: 44px;
      }

      .mulligan-checkboxes .checkbox-container input[type='checkbox'] {
        width: 20px;
        height: 20px;
        flex-shrink: 0;
        -webkit-appearance: auto;
        appearance: auto;
      }

      .submit-btn {
        padding: clamp(10px, 3vw, 12px);
        font-size: clamp(0.9em, 3vw, 1em);
        margin-top: 10px;
      }

      .help-text {
        font-size: clamp(0.65em, 2vw, 0.7em);
      }

      .slider-container {
        margin: 10px 0;
      }

      .slider-value {
        font-size: clamp(0.85em, 2.5vw, 0.95em);
        margin-top: 6px;
      }
    }

    /* Optimize for 300px - remove wasted space */
    @media (max-width: 350px) {
      body {
        padding: 0;
        margin: 0;
      }

      .form-container {
        padding: 8px;
        border-radius: 0;
        margin: 0;
        width: 100%;
        box-sizing: border-box;
      }

      h1 {
        font-size: 1.5em;
        margin-bottom: var(--spacing-label);
        font-weight: 700;
        width: 100%;
      }

      label {
        font-size: 0.9em;
        margin-bottom: var(--spacing-label);
        font-weight: 600;
      }

      .form-group {
        margin-bottom: var(--spacing-form-group);
      }

      /* Make venue narrower with consistent height */
      #venue {
        max-width: none;
        width: 100%;
        font-size: 12px;
        padding: 0;
        padding-left: 6px;
        padding-right: 32px;
        height: 36px;
        line-height: 36px;
        box-sizing: border-box;
        background-position: right 6px center;
        background-size: 12px;
      }

      /* Consistent height for all selects at 300px */
      select {
        padding: 0;
        padding-left: 8px;
        padding-right: 36px;
        height: 40px;
        line-height: 40px;
        box-sizing: border-box;
        background-position: right 8px center;
        background-size: 12px;
      }

    }

    /* Single column only below 299px */
    @media (max-width: 299px) {
      .form-row {
        grid-template-columns: 1fr;
        gap: clamp(8px, 3vw, 10px);
      }
    }

    /* Select dropdown options */
    select option {
      background: #1a1a1a;
      color: #f8f9fa;
    }

    /* Ensure Mulligan checkboxes remain two columns and match selects */
    .mulligan-checkboxes {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: clamp(6px, 2vw, 10px);
      align-items: center;
      overflow: visible;
    }

    .mulligan-checkboxes .checkbox-container {
      box-sizing: border-box;
      height: var(--select-height);
      padding: clamp(0.625rem, 2.5cqh, 0.75rem) clamp(0.75rem, 3cqw, 1rem);
      border-radius: 10px;
      border: 1px solid #2a2a2a;
      background: #000000;
      display: flex;
      align-items: center;
      gap: clamp(0.375rem, 1.5cqw, 0.5rem);
      min-width: 0;
    }

    .mulligan-checkboxes .checkbox-container input[type='checkbox'] {
      width: 18px;
      height: 18px;
      cursor: pointer;
      accent-color: #7c3aed;
      flex-shrink: 0;
      opacity: 1;
      visibility: visible;
      -webkit-appearance: auto;
      appearance: auto;
    }

    /* Consistent dropdown heights */
    :root {
      --select-height: clamp(40px, 4.2vh, 48px);
    }

    select {
      height: var(--select-height) !important;
      min-height: var(--select-height) !important;
      line-height: var(--select-height) !important;
      box-sizing: border-box;
      padding-top: 0 !important;
      padding-bottom: 0 !important;
    }

    #otherVenue,
    #otherWhitePlayer,
    #otherBlackPlayer {
      width: 100%;
      height: var(--select-height);
      min-height: var(--select-height);
      padding: clamp(0.625rem, 2.5cqh, 0.75rem) clamp(0.75rem, 3cqw, 1rem);
      border: 1px solid #2a2a2a;
      border-radius: 10px;
      background: #000000;
      color: #f8f9fa;
      box-sizing: border-box;
      font-family: 'Inter', sans-serif;
    }

    #otherVenue:focus,
    #otherWhitePlayer:focus,
    #otherBlackPlayer:focus {
      outline: none;
      border-color: #7c3aed;
      box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.2);
      transform: translateY(-2px);
    }

    /* Current Session Display Styles */
    #current-session-container {
      padding: clamp(1rem, 3cqh, 1.5rem);
      background: #1a1a1a;
      border: 1px solid #2a2a2a;
      border-radius: 12px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }


    .stats-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      background: #000000;
      border-radius: 8px;
      overflow: hidden;
    }

    .stats-table th,
    .stats-table td {
      padding: clamp(8px, 2cqh, 12px) clamp(8px, 2cqw, 12px);
      text-align: center;
      border: 1px solid #2a2a2a;
      font-size: clamp(0.85rem, 2.5cqw, 0.95rem);
    }

    .stats-table th {
      background: linear-gradient(135deg, #00d4ff 0%, #7c3aed 50%, #10b981 100%);
      color: #f8f9fa;
      font-weight: 700;
      letter-spacing: 0.02em;
    }

    .stats-table tbody tr:hover {
      background: rgba(124, 58, 237, 0.1);
      transition: background 0.2s;
    }

    .stats-table tbody tr:first-child {
      background: rgba(124, 58, 237, 0.05);
    }

    /* Player Stats Grid (Infographic) */
    .stats-grid {
      display: flex;
      flex-direction: column;
      gap: clamp(24px, 6cqh, 32px);
      margin-top: 10px;
    }

    .color-breakdown {
      display: flex;
      align-items: center;
      gap: clamp(16px, 4cqw, 24px);
      margin-bottom: var(--spacing-section);
      padding: 0;
    }

    .color-breakdown-bar {
      flex: 1;
      height: clamp(32px, 5cqh, 48px);
      display: flex;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
      border: 1px solid rgba(0, 0, 0, 0.3);
    }

    .color-bar-segment {
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
      font-weight: 700;
      font-size: clamp(0.75rem, 2.2cqw, 0.9rem);
      color: rgba(248, 249, 250, 0.95);
      transition: flex 0.3s ease;
      flex-direction: row;
      flex-wrap: nowrap;
      min-width: 0;
    }

    .segment-count,
    .segment-percent {
      display: flex;
      align-items: center;
      line-height: 1;
      white-space: nowrap;
      flex-shrink: 0;
    }

    .segment-percent.percent-low {
      color: #ef4444;
    }

    .segment-percent.percent-medium {
      color: #f59e0b;
    }

    .segment-percent.percent-high {
      color: #10b981;
    }

    .segment-percent.percent-excellent {
      color: #06b6d4;
    }

    .color-bar-segment.white {
      background: #ffffff;
      border-right: 1px solid rgba(0, 0, 0, 0.2);
    }

    .color-bar-segment.black {
      background: linear-gradient(90deg, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.3));
      border-right: 1px solid rgba(255, 255, 255, 0.1);
    }

    .color-bar-segment.draws {
      background: linear-gradient(90deg, rgba(107, 114, 128, 0.5), rgba(107, 114, 128, 0.4));
      min-width: clamp(60px, 8cqw, 100px);
    }

    .segment-count {
      font-size: clamp(0.8rem, 2.5cqw, 0.95rem);
      font-weight: 700;
      line-height: 1;
    }

    .segment-percent {
      font-size: clamp(0.8rem, 2.5cqw, 0.95rem);
      font-weight: 600;
      opacity: 0.9;
      white-space: nowrap;
      line-height: 1;
    }

    .color-bar-segment.white .segment-count {
      color: #000000;
    }

    .color-bar-segment.white .segment-percent.percent-low {
      color: #b91c1c;
    }

    .color-bar-segment.white .segment-percent.percent-medium {
      color: #b45309;
    }

    .color-bar-segment.white .segment-percent.percent-high {
      color: #065f46;
    }

    .color-bar-segment.white .segment-percent.percent-excellent {
      color: #0e5a6a;
    }

    .stat-card {
      background: transparent;
      border: none;
      padding: 0;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: visible;
    }

    .stat-card:hover {
      border-color: transparent;
      background: transparent;
      box-shadow: none;
    }

    .stat-card-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: var(--spacing-label);
      gap: 16px;
    }

    .stat-card-name {
      font-weight: 700;
      font-size: clamp(1.1rem, 3.5cqw, 1.4rem);
      color: #f8f9fa;
    }

    .stat-total {
      font-size: clamp(0.85rem, 2.5cqw, 0.95rem);
      color: rgba(248, 249, 250, 0.6);
      font-weight: 500;
    }

    .stat-brutality {
      display: flex;
      gap: 12px;
      font-size: clamp(0.9rem, 2.8cqw, 1rem);
      color: rgba(248, 249, 250, 0.7);
      font-weight: 500;
    }

    .stat-brutality-item {
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .stat-bar-wrapper {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .stat-bar-container {
      display: flex;
      align-items: center;
      flex: 1;
      height: clamp(32px, 5cqh, 48px);
      background: transparent;
      border-radius: 8px;
      padding: 0;
      overflow: hidden;
    }

    .stat-bar {
      flex: 1;
      height: 100%;
      display: flex;
      border-radius: 6px;
      overflow: hidden;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
    }

    .stat-bar-segment {
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: clamp(0.75rem, 2.2cqw, 0.85rem);
      color: rgba(248, 249, 250, 0.9);
      transition: flex 0.3s ease;
    }

    .stat-bar-segment.wins {
      flex: var(--wins-width);
      background: var(--player-color);
    }

    .stat-bar-segment.losses {
      flex: var(--losses-width);
      background: rgba(239, 68, 68, 0.7);
    }

    .stat-bar-segment.draws {
      flex: var(--draws-width);
      background: rgba(107, 114, 128, 0.7);
    }

    .stat-winrate {
      font-size: clamp(1.2rem, 4cqw, 1.6rem);
      font-weight: 700;
      color: var(--player-color);
      white-space: nowrap;
    }

    #session-loading,
    #session-no-data,
    #session-error {
      font-size: clamp(0.9rem, 2.8cqw, 1rem);
    }

    #session-loading,
    #session-no-data {
      color: rgba(248, 249, 250, 0.7);
    }

    .session-meta {
      margin-bottom: var(--spacing-form-group);
    }

    .session-description {
      font-size: clamp(0.9rem, 2.6cqw, 1rem);
      color: rgba(248, 249, 250, 0.9);
      font-weight: 500;
      line-height: 1.4;
    }

    .session-description strong {
      color: #7c3aed;
      font-weight: 700;
    }

    .session-description .match-count {
      color: #7c3aed;
      font-weight: 700;
    }

    .session-description .session-count {
      color: #00d4ff;
      font-weight: 700;
    }

    .session-description .venue {
      color: #10b981;
      font-weight: 600;
    }

    .session-description .day-of-week {
      color: #00d4ff;
      font-weight: 600;
    }

    .session-description .time-of-day {
      color: #00d4ff;
      font-weight: 600;
    }

    .session-meta-inline {
      display: flex;
      align-items: center;
      gap: clamp(10px, 2.2cqw, 14px);
      flex-wrap: wrap;
      font-size: clamp(0.85rem, 2.5cqw, 0.95rem);
    }

    .session-venue-badge {
      background: rgba(124, 58, 237, 0.2);
      color: #f8f9fa;
      padding: clamp(5px, 1.1cqh, 7px) clamp(12px, 2.6cqw, 16px);
      border-radius: 6px;
      font-weight: 600;
      border: 1px solid rgba(124, 58, 237, 0.3);
      display: flex;
      align-items: center;
      gap: 0;
    }

    .session-separator {
      color: rgba(248, 249, 250, 0.4);
      font-weight: bold;
    }

    .session-match-badge {
      color: rgba(248, 249, 250, 0.85);
      font-weight: 500;
      padding: clamp(4px, 0.8cqh, 6px) 0;
    }

    .session-match-badge span {
      color: #7c3aed;
      font-weight: 700;
      font-size: clamp(0.95rem, 2.8cqw, 1.05rem);
    }

    @media (max-width: 600px) {
      .stats-table {
        font-size: clamp(0.75rem, 2.2vw, 0.85rem);
      }

      .stats-table th,
      .stats-table td {
        padding: clamp(6px, 1.5vw, 8px) clamp(4px, 1vw, 6px);
      }

      #refresh-session-btn {
        padding: clamp(4px, 1vw, 6px) clamp(8px, 2vw, 10px);
        font-size: clamp(0.75rem, 2vw, 0.85rem);
      }

      .session-selector-container {
        padding: clamp(0.875rem, 2.5cqh, 1rem) clamp(0.875rem, 2.5cqw, 1.125rem);
        gap: clamp(0.375rem, 1.5cqh, 0.5rem);
      }

      .session-selector-label {
        font-size: clamp(0.85rem, 2.5vw, 0.95rem);
      }

      #session-selector {
        font-size: clamp(0.9rem, 3vw, 1rem);
        padding: clamp(0.75rem, 2cqh, 0.875rem) clamp(0.875rem, 2.5cqw, 1rem);
        padding-right: clamp(2.75rem, 6.5vw, 3rem);
      }

      .session-meta-inline {
        font-size: clamp(0.8rem, 2.5vw, 0.9rem);
        gap: clamp(6px, 1.5vw, 8px);
      }

      .session-venue-badge {
        padding: clamp(3px, 0.8vw, 5px) clamp(8px, 2vw, 10px);
        font-size: clamp(0.8rem, 2.5vw, 0.85rem);
      }
    }

    /* Tab Navigation */
    .tab-navigation {
      display: flex;
      gap: 0;
      margin-bottom: var(--spacing-section);
      border-bottom: 2px solid #2a2a2a;
    }

    .tab-button {
      flex: 1;
      padding: clamp(0.75rem, 2.5cqh, 1rem) clamp(1rem, 3cqw, 1.5rem);
      background: transparent;
      border: none;
      border-bottom: 3px solid transparent;
      color: rgba(248, 249, 250, 0.6);
      font-family: 'Space Grotesk', sans-serif;
      font-size: clamp(0.95rem, 3cqw, 1.1rem);
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      bottom: -2px;
    }

    .tab-button:hover {
      color: rgba(248, 249, 250, 0.9);
      background: rgba(124, 58, 237, 0.1);
    }

    .tab-button.active {
      color: #7c3aed;
      border-bottom-color: #7c3aed;
      background: rgba(124, 58, 237, 0.1);
    }

    .tab-button:active {
      transform: scale(0.98);
    }

    /* Tab Content */
    .tab-content {
      display: none;
      animation: fadeIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .tab-content.active {
      display: block;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Single column mode tab adjustments */
    .single-column .tab-button {
      font-size: clamp(1rem, 4vw, 1.2rem);
      padding: clamp(0.875rem, 3cqh, 1.125rem) clamp(1.25rem, 4cqw, 1.75rem);
    }

    /* Session Selector Styling */
    .session-selector-container {
      display: flex;
      flex-direction: column;
      gap: clamp(0.5rem, 2cqh, 0.75rem);
      margin-bottom: var(--spacing-section);
      padding: clamp(1rem, 3cqh, 1.25rem) clamp(1rem, 3cqw, 1.5rem);
      background: rgba(124, 58, 237, 0.1);
      border: 1px solid rgba(124, 58, 237, 0.3);
      border-radius: 12px;
    }

    .session-selector-label {
      font-family: 'Space Grotesk', sans-serif;
      font-size: clamp(0.95rem, 3cqw, 1.1rem);
      font-weight: 700;
      color: #7c3aed;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 0;
    }

    #session-selector {
      width: 100%;
      font-size: clamp(1rem, 3.5cqw, 1.1rem);
      font-weight: 600;
      padding: clamp(0.875rem, 2.5cqh, 1rem) clamp(1rem, 3cqw, 1.25rem);
      padding-right: clamp(3rem, 7cqw, 3.5rem);
      background-color: #000000;
      border: 2px solid #7c3aed;
      border-radius: 10px;
      color: #f8f9fa;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    #session-selector:hover {
      border-color: #6d28d9;
      background-color: rgba(124, 58, 237, 0.05);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(124, 58, 237, 0.3);
    }

    #session-selector:focus {
      outline: none;
      border-color: #7c3aed;
      box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.3);
    }

    /* Single column mode adjustments */
    .single-column .session-selector-container {
      padding: clamp(1.125rem, 3.5cqh, 1.5rem) clamp(1.25rem, 4cqw, 1.75rem);
    }

    .single-column .session-selector-label {
      font-size: clamp(1.1rem, 4vw, 1.3rem);
    }

    .single-column #session-selector {
      font-size: clamp(1.1rem, 4.5vw, 1.25rem);
      padding: clamp(1rem, 3cqh, 1.125rem) clamp(1.25rem, 4cqw, 1.5rem);
      padding-right: clamp(3.25rem, 8cqw, 3.75rem);
      height: auto;
      line-height: 1.4;
    }
  </style>

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml"
    href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚ôüÔ∏è</text></svg>" />
</head>

<body>
  <div class="form-container">
    <h1 onclick="toggleSingleColumn()">‚ôüÔ∏è Chess Tracker 2026</h1>
    <p class="subtitle">New and improved with live session tracking</p>

    <!-- Tab Navigation -->
    <div class="tab-navigation">
      <button class="tab-button" onclick="switchTab('stats')">Session Stats</button>
      <button class="tab-button active" onclick="switchTab('form')">Log Match</button>
    </div>

    <!-- Session Stats Tab -->
    <div id="stats-tab" class="tab-content">
      <!-- Session Selector -->
      <div class="session-selector-container">
        <label for="session-selector" class="session-selector-label">View Stats For:</label>
        <select id="session-selector" onchange="onSessionChange()">
          <option value="">Most Recent Session</option>
          <option value="ytd">Year to Date</option>
          <!-- Options populated by JavaScript -->
        </select>
      </div>

      <!-- Current Session Display -->
      <div id="current-session-container">
        <!-- Loading State -->
        <div id="session-loading" style="text-align: center; padding: 20px; display: none;">
          Loading session data...
        </div>

        <!-- Data Display -->
        <div id="session-data" style="display: none;">
          <div class="session-meta">
            <div id="session-description" class="session-description">-</div>
          </div>

          <div class="session-stats">
            <div id="color-breakdown" class="color-breakdown">
              <!-- Populated by JavaScript with white/black wins -->
            </div>
            <div id="session-stats-grid" class="stats-grid">
              <!-- Populated by JavaScript with player stat cards -->
            </div>
          </div>

          <div class="session-summary">
            <p id="session-summary-text" style="font-style: italic; color: rgba(248, 249, 250, 0.7); margin-top: 15px; font-size: clamp(0.9rem, 2.8cqw, 0.95rem);">
              <!-- Populated by JavaScript -->
            </p>
          </div>
        </div>

        <!-- No Data State -->
        <div id="session-no-data" style="text-align: center; padding: 20px; color: rgba(248, 249, 250, 0.7); display: none;">
          No active session. Start logging matches to begin a new session!
        </div>

        <!-- Error State -->
        <div id="session-error" style="text-align: center; padding: 20px; color: #ef4444; display: none;">
          Failed to load session data. Please try again.
        </div>
      </div>
    </div>
    <!-- End Session Stats Tab -->

    <!-- Log Match Tab -->
    <div id="form-tab" class="tab-content active">
    <form onsubmit="return handleSubmit(event);" action="javascript:void(0)">
      <!-- Players Row -->
      <div class="form-row">
        <div class="form-group">
          <label for="whitePlayer">‚ôü White Player</label>
          <select id="whitePlayer" name="whitePlayer" required aria-describedby="white-help"
            onchange="toggleOtherPlayer('white', this.value); checkDuplicatePlayers(); updateMulliganLabels();">
            <option value="">Who played?</option>
            <!-- Options populated dynamically from configuration -->
          </select>
          <small id="white-help" class="help-text">Required</small>
        </div>

        <div class="form-group">
          <label for="blackPlayer">‚ôüÔ∏è Black Player</label>
          <select id="blackPlayer" name="blackPlayer" required aria-describedby="black-help"
            onchange="toggleOtherPlayer('black', this.value); checkDuplicatePlayers(); updateMulliganLabels();">
            <option value="">Who else played?</option>
            <!-- Options populated dynamically from configuration -->
          </select>
          <small id="black-help" class="help-text">Required</small>
        </div>
      </div>

      <!-- Other Player Fields (initially hidden) -->
      <div class="form-row" id="otherPlayersRow" style="display: none;">
        <div class="form-group" id="otherWhiteGroup" style="display: none;">
          <label for="otherWhitePlayer">‚ôü White Name</label>
          <input type="text" id="otherWhitePlayer" name="otherWhitePlayer" placeholder="Enter white player name..."
            aria-describedby="other-white-help" maxlength="50"
            oninput="updateWinnerDropdown(); updateMulliganLabels();" />
          <small id="other-white-help" class="help-text">Enter the white player's name.</small>
        </div>

        <div class="form-group" id="otherBlackGroup" style="display: none;">
          <label for="otherBlackPlayer">‚ôüÔ∏è Black Name</label>
          <input type="text" id="otherBlackPlayer" name="otherBlackPlayer" placeholder="Enter black player name..."
            aria-describedby="other-black-help" maxlength="50"
            oninput="updateWinnerDropdown(); updateMulliganLabels();" />
          <small id="other-black-help" class="help-text">Enter the black player's name.</small>
        </div>
      </div>

      <!-- Winner and Match Ending Row -->
      <div class="form-row">
        <div class="form-group">
          <label for="winner">üèÜ Winner</label>
          <select id="winner" name="winner" required aria-describedby="winner-help" onchange="onWinnerChange();">
            <option value="">Who won?</option>
            <option value="Draw">Draw</option>
          </select>
          <small id="winner-help" class="help-text">Required</small>
        </div>

        <div class="form-group">
          <label for="gameEnding">üéØ Match Ending</label>
          <select id="gameEnding" name="gameEnding" required aria-describedby="ending-help">
            <option value="">How did it end?</option>
            <!-- Non-draw endings shown by default; draw-only endings appear when winner === 'Draw' -->
            <option value="Checkmate">Checkmate</option>
            <option value="Resignation">Resignation</option>
            <option value="Time Out">Time Out</option>
          </select>
          <small id="ending-help" class="help-text">Required</small>
        </div>
      </div>

      <!-- Time Limit, Venue, and Mulligan Row -->
      <div class="form-row">
        <div class="form-group">
          <label for="timeLimit">‚è∞ Time Limit</label>
          <div class="time-limit-container">
            <select id="timeLimitMinutes" name="timeLimitMinutes" aria-describedby="time-limit-help">
              <option value="">mm</option>
              <option value="1">01</option>
              <option value="2">02</option>
              <option value="3">03</option>
              <option value="4">04</option>
              <option value="5">05</option>
              <option value="6">06</option>
              <option value="7">07</option>
              <option value="8">08</option>
              <option value="9">09</option>
              <option value="10">10</option>
              <option value="15">15</option>
            </select>
            <span class="time-separator">:</span>
            <select id="timeLimitSeconds" name="timeLimitSeconds" aria-describedby="time-limit-help">
              <option value="">ss</option>
              <option value="0">00</option>
              <option value="5">05</option>
              <option value="10">10</option>
              <option value="15">15</option>
              <option value="20">20</option>
              <option value="30">30</option>
              <option value="45">45</option>
            </select>
          </div>
          <small id="time-limit-help" class="help-text">If timeout</small>
        </div>

        <div class="form-group">
          <label for="venue">üìç Venue</label>
          <select id="venue" name="venue" aria-describedby="venue-help"
            onchange="toggleOtherVenue(this.value); toggleMulliganSection(this.value);">
            <option value="">Where did you play?</option>
            <!-- Options populated dynamically from configuration -->
          </select>
          <small id="venue-help" class="help-text">Optional</small>
        </div>
      </div>

      <!-- Other Venue Field (initially hidden)ut -->
      <div class="form-row" id="otherVenueRow" style="display: none;">
        <div class="form-group" id="otherVenueGroup">
          <label for="otherVenue">üìç Other Venue</label>
          <input type="text" id="otherVenue" name="otherVenue" placeholder="Enter the venue name..."
            aria-describedby="other-venue-help" maxlength="100" />
          <small id="other-venue-help" class="help-text">Enter the name of the venue.</small>
        </div>
      </div>

      <!-- Mulligan Section (initially hidden) -->
      <div class="form-group" id="mulliganSection" style="display: none;">
        <div class="mulligan-container">
          <label>üé≤ Mulligan Used</label>
          <div class="mulligan-checkboxes">
            <div class="checkbox-container" onclick="toggleCheckbox('whiteMulligan')">
              <input type="checkbox" id="whiteMulligan" name="whiteMulligan" onclick="event.stopPropagation();" />
              <label for="whiteMulligan" id="whitePlayerLabel">White Player</label>
            </div>
            <div class="checkbox-container" onclick="toggleCheckbox('blackMulligan')">
              <input type="checkbox" id="blackMulligan" name="blackMulligan" onclick="event.stopPropagation();" />
              <label for="blackMulligan" id="blackPlayerLabel">Black Player</label>
            </div>
          </div>
        </div>
      </div>

      <!-- Brutality Scale -->
      <div class="form-group">
        <label for="brutality">üíÄ Brutality Scale</label>
        <div class="slider-container">
          <div class="slider-labels">
            <span class="gentle">Meh (0)</span>
            <span class="brutal">Brutal (5)</span>
          </div>
          <input type="range" id="brutality" name="brutality" min="0" max="5" value="0"
            aria-describedby="brutality-help" oninput="updateBrutalitySlider(this.value)" />
          <div class="slider-value" id="brutalityValue">Not rated</div>
          <small id="brutality-help" class="help-text">0=Meh, 5=Brutal</small>
        </div>
      </div>


      <!-- Notes -->
      <div class="form-group">
        <label for="notes">üìù Notes</label>
        <textarea id="notes" name="notes" placeholder="Match notes, key moments, brutality insights..."
          aria-describedby="notes-help" maxlength="500"></textarea>
        <small id="notes-help" class="help-text">Insights, key moments</small>
      </div>

      <!-- Picture Upload -->
      <div class="form-group">
        <label for="picture">üì∏ Match Picture</label>
        <input type="file" id="picture" name="picture" accept="image/*" aria-describedby="picture-help" />
        <small id="picture-help" class="help-text">Got a photo?</small>
      </div>

      <button type="submit" class="submit-btn">Log Match</button>
    </form>
    </div>
    <!-- End Log Match Tab -->
  </div>

  <!-- JavaScript -->
  <script>
    // ===== CONFIGURATION =====
    
    /**
     * Color emoji mappings for player visual identification
     * Built dynamically from server configuration
     */
    var colorEmojis = {};

    // Global configuration storage (loaded from server)
    var appConfig = {
      players: [],
      playerColors: {},
      playerEmojis: {},
      venues: [],
      mulliganVenues: []
    };

    /**
     * Load configuration from server on page load
     */
    function loadConfiguration() {
      google.script.run
        .withSuccessHandler(function(config) {
          appConfig = config;
          
          // Build colorEmojis mapping from player colors and emojis
          colorEmojis = {};
          for (var player in config.playerColors) {
            var color = config.playerColors[player];
            var emoji = config.playerEmojis[player];
            if (color && emoji) {
              colorEmojis[color] = emoji;
            }
          }
          
          populatePlayerDropdowns(config.players);
          populateVenueDropdown(config.venues);
          setupMulliganLogic(config.mulliganVenues);
        })
        .withFailureHandler(function(error) {
          console.error('Failed to load configuration:', error);
          alert('Failed to load form configuration. Please refresh the page.');
        })
        .getConfig();
    }

    // ===== DROPDOWN POPULATION =====

    /**
     * Populate player dropdowns with configured players
     * Adds color emoji prefixes to visually distinguish players
     */
    function populatePlayerDropdowns(players) {
      var whiteSelect = document.getElementById('whitePlayer');
      var blackSelect = document.getElementById('blackPlayer');

      // Clear existing options except the first placeholder
      whiteSelect.innerHTML = '<option value="">Who played?</option>';
      blackSelect.innerHTML = '<option value="">Who else played?</option>';

      // Add each configured player with color emoji prefix
      players.forEach(function(player) {
        var playerColor = appConfig.playerColors[player];
        var emoji = colorEmojis[playerColor] || '';
        var displayText = emoji ? emoji + ' ' + player : player;
        
        var whiteOption = document.createElement('option');
        whiteOption.value = player;
        whiteOption.textContent = displayText;
        whiteSelect.appendChild(whiteOption);

        var blackOption = document.createElement('option');
        blackOption.value = player;
        blackOption.textContent = displayText;
        blackSelect.appendChild(blackOption);
      });

      // Always add "Other" option at the end
      var whiteOther = document.createElement('option');
      whiteOther.value = 'Other';
      whiteOther.textContent = 'Other';
      whiteSelect.appendChild(whiteOther);

      var blackOther = document.createElement('option');
      blackOther.value = 'Other';
      blackOther.textContent = 'Other';
      blackSelect.appendChild(blackOther);

      // Update placeholder class
      updateSelectPlaceholderClass(whiteSelect);
      updateSelectPlaceholderClass(blackSelect);
    }

    /**
     * Populate venue dropdown with configured venues
     */
    function populateVenueDropdown(venues) {
      var venueSelect = document.getElementById('venue');

      // Clear existing options except the first placeholder
      venueSelect.innerHTML = '<option value="">Where did you play?</option>';

      // Add each configured venue
      venues.forEach(function(venue) {
        var option = document.createElement('option');
        option.value = venue;
        option.textContent = venue;
        venueSelect.appendChild(option);
      });

      // Always add "Other" option at the end
      var otherOption = document.createElement('option');
      otherOption.value = 'Other';
      otherOption.textContent = 'Other';
      venueSelect.appendChild(otherOption);

      // Update placeholder class
      updateSelectPlaceholderClass(venueSelect);
    }

    /**
     * Setup mulligan logic based on configured venues
     */
    function setupMulliganLogic(mulliganVenues) {
      // Update the toggleMulliganSection function to use configured venues
      appConfig.mulliganVenues = mulliganVenues;
    }

    // ===== UI UTILITIES =====

    /**
     * Update placeholder styling for selects
     */
    function updateSelectPlaceholderClass(selectElement) {
      if (selectElement.value === '') {
        selectElement.classList.add('placeholder-shown');
      } else {
        selectElement.classList.remove('placeholder-shown');
      }
    }

    /**
     * Initialize all selects with placeholder class management
     */
    function initSelectPlaceholders() {
      var selects = document.querySelectorAll('select');
      for (var i = 0; i < selects.length; i++) {
        updateSelectPlaceholderClass(selects[i]);
        selects[i].addEventListener('change', function() {
          updateSelectPlaceholderClass(this);
        });
      }
    }

    // ===== INITIALIZATION =====

    // Initialize configuration on page load
    document.addEventListener('DOMContentLoaded', function() {
      loadConfiguration();
      initSelectPlaceholders();
    });

    // ===== FORM INTERACTION HANDLERS =====

    function selectResult(container) {
      var radio = container.querySelector('input[type="radio"]');
      if (event.target.type !== 'radio') {
        radio.checked = true;
      }
    }

    function toggleCheckbox(checkboxId) {
      var checkbox = document.getElementById(checkboxId);
      if (checkbox) {
        checkbox.checked = !checkbox.checked;
      }
    }

    function toggleMulliganSection(venueValue) {
      var mulliganSection = document.getElementById('mulliganSection');
      // Check if venue is in the configured mulligan venues list
      if (appConfig.mulliganVenues.indexOf(venueValue) !== -1) {
        mulliganSection.style.display = 'block';
        updateMulliganLabels();
      } else {
        mulliganSection.style.display = 'none';
        // Reset checkboxes when hiding
        document.getElementById('whiteMulligan').checked = false;
        document.getElementById('blackMulligan').checked = false;
      }
    }

    function updateMulliganLabels() {
      var whitePlayer = document.getElementById('whitePlayer').value;
      var blackPlayer = document.getElementById('blackPlayer').value;
      var whitePlayerLabel = document.getElementById('whitePlayerLabel');
      var blackPlayerLabel = document.getElementById('blackPlayerLabel');

      // Get actual player names
      var whitePlayerName = whitePlayer;
      var blackPlayerName = blackPlayer;

      if (whitePlayer === 'Other') {
        var otherWhiteInput = document.getElementById('otherWhitePlayer');
        whitePlayerName = otherWhiteInput.value.trim() || 'White Player';
      }

      if (blackPlayer === 'Other') {
        var otherBlackInput = document.getElementById('otherBlackPlayer');
        blackPlayerName = otherBlackInput.value.trim() || 'Black Player';
      }

      whitePlayerLabel.textContent = whitePlayerName || 'White Player';
      blackPlayerLabel.textContent = blackPlayerName || 'Black Player';
    }

    function updateBrutalitySlider(value) {
      var display = document.getElementById('brutalityValue');
      var description = '';
      var color = '';

      if (!value || value === '') {
        description = 'Not rated';
        color = '#666';
      } else if (value == 0) {
        description = 'Meh';
        color = '#95a5a6';
      } else if (value == 1) {
        description = 'Spicy';
        color = '#f39c12';
      } else if (value == 2) {
        description = 'Harsh';
        color = '#e67e22';
      } else if (value == 3) {
        description = 'Ruthless';
        color = '#e74c3c';
      } else if (value == 4) {
        description = 'Devastating';
        color = '#c0392b';
      } else {
        description = 'Brutal';
        color = '#8b0000';
      }

      if (value === '' || !value) {
        display.textContent = description;
      } else {
        display.textContent = description + ' (' + value + ')';
      }
      display.style.color = color;
    }

    // ===== DYNAMIC FIELD MANAGEMENT =====

    function toggleOtherVenue(value) {
      var otherVenueRow = document.getElementById('otherVenueRow');
      var otherVenueField = document.getElementById('otherVenue');

      if (value === 'Other') {
        otherVenueRow.style.display = 'grid';
        otherVenueField.required = true;
      } else {
        otherVenueRow.style.display = 'none';
        otherVenueField.required = false;
        otherVenueField.value = '';
      }
    }

    function toggleOtherPlayer(playerType, value) {
      var otherPlayersRow = document.getElementById('otherPlayersRow');
      var otherWhiteGroup = document.getElementById('otherWhiteGroup');
      var otherBlackGroup = document.getElementById('otherBlackGroup');
      var otherWhiteField = document.getElementById('otherWhitePlayer');
      var otherBlackField = document.getElementById('otherBlackPlayer');

      if (playerType === 'white') {
        if (value === 'Other') {
          otherPlayersRow.style.display = 'grid';
          otherWhiteGroup.style.display = 'block';
          otherWhiteField.required = true;
        } else {
          otherWhiteGroup.style.display = 'none';
          otherWhiteField.required = false;
          otherWhiteField.value = '';
          // Hide row if both are hidden
          if (otherBlackGroup.style.display === 'none') {
            otherPlayersRow.style.display = 'none';
          }
        }
      } else if (playerType === 'black') {
        if (value === 'Other') {
          otherPlayersRow.style.display = 'grid';
          otherBlackGroup.style.display = 'block';
          otherBlackField.required = true;
        } else {
          otherBlackGroup.style.display = 'none';
          otherBlackField.required = false;
          otherBlackField.value = '';
          // Hide row if both are hidden
          if (otherWhiteGroup.style.display === 'none') {
            otherPlayersRow.style.display = 'none';
          }
        }
      }

      // Check for duplicate players after selection change
      checkDuplicatePlayers();
      // Update winner dropdown when players change
      updateWinnerDropdown();
    }

    /* Title responsiveness: remove emoji at very small widths (no media queries) */
    (function () {
      function updateTitleEmoji() {
        var container = document.querySelector('.form-container');
        var h1 = container ? container.querySelector('h1') : document.querySelector('h1');
        if (!h1) return;

        // Preserve original text once
        if (!h1.dataset.origText) h1.dataset.origText = h1.textContent;
        var orig = h1.dataset.origText;

        var width = container ? container.clientWidth : window.innerWidth;

        if (width <= 300) {
          // Remove a single leading emoji (including optional variation selector) and one following space
          var stripped = orig.replace(/^[\u{1F300}-\u{1F6FF}\u{1F900}-\u{1F9FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}]\uFE0F?\s?/u, '');
          h1.textContent = stripped;
        } else {
          h1.textContent = orig;
        }
      }

      window.addEventListener('resize', updateTitleEmoji);
      document.addEventListener('DOMContentLoaded', function () {
        setTimeout(updateTitleEmoji, 50);
      });
      var ro = (window.ResizeObserver && new ResizeObserver(updateTitleEmoji));
      var containerEl = document.querySelector('.form-container');
      if (ro && containerEl) ro.observe(containerEl);
    })();

    // ===== FORM VALIDATION =====

    function checkDuplicatePlayers() {
      var whitePlayer = document.getElementById('whitePlayer').value;
      var blackPlayer = document.getElementById('blackPlayer').value;
      var whiteHelp = document.getElementById('white-help');
      var blackHelp = document.getElementById('black-help');

      // Clear any existing error messages
      if (whiteHelp) {
        whiteHelp.classList.remove('show', 'error');
        whiteHelp.textContent = 'Required field. Who played white?';
      }
      if (blackHelp) {
        blackHelp.classList.remove('show', 'error');
        blackHelp.textContent = 'Required field. Who played black?';
      }

      // Check if same core player selected for both colors (but allow Other + Other)
      if (whitePlayer && blackPlayer &&
        whitePlayer === blackPlayer &&
        whitePlayer !== 'Other' &&
        appConfig.players.indexOf(whitePlayer) !== -1) {
        if (whiteHelp) {
          whiteHelp.textContent = '‚ùå Same player cannot be both white and black';
          whiteHelp.classList.add('show', 'error');
        }
        if (blackHelp) {
          blackHelp.textContent = '‚ùå Same player cannot be both white and black';
          blackHelp.classList.add('show', 'error');
        }
      }

      // Update winner dropdown when players change
      updateWinnerDropdown();
    }

    function updateWinnerDropdown() {
      var whitePlayer = document.getElementById('whitePlayer').value;
      var blackPlayer = document.getElementById('blackPlayer').value;
      var winnerDropdown = document.getElementById('winner');
      var currentSelection = winnerDropdown.value;

      // Clear existing options except Draw
      winnerDropdown.innerHTML = '<option value="">Who won?</option><option value="Draw">Draw</option>';

      // Get actual player names (handle "Other" option)
      var whitePlayerName = whitePlayer;
      var blackPlayerName = blackPlayer;
      var whitePlayerColor = appConfig.playerColors[whitePlayer];
      var blackPlayerColor = appConfig.playerColors[blackPlayer];
      var whiteEmoji = colorEmojis[whitePlayerColor] || '';
      var blackEmoji = colorEmojis[blackPlayerColor] || '';

      if (whitePlayer === 'Other') {
        var otherWhiteInput = document.getElementById('otherWhitePlayer');
        whitePlayerName = otherWhiteInput.value.trim() || 'White Player';
        whiteEmoji = '';
      }

      if (blackPlayer === 'Other') {
        var otherBlackInput = document.getElementById('otherBlackPlayer');
        blackPlayerName = otherBlackInput.value.trim() || 'Black Player';
        blackEmoji = '';
      }

      // Add player options if players are selected
      if (whitePlayer) {
        var whiteOption = document.createElement('option');
        whiteOption.value = 'White';
        whiteOption.textContent = (whiteEmoji ? whiteEmoji + ' ' : '') + whitePlayerName + ' (White)';
        winnerDropdown.insertBefore(whiteOption, winnerDropdown.lastElementChild);
      }

      if (blackPlayer) {
        var blackOption = document.createElement('option');
        blackOption.value = 'Black';
        blackOption.textContent = (blackEmoji ? blackEmoji + ' ' : '') + blackPlayerName + ' (Black)';
        winnerDropdown.insertBefore(blackOption, winnerDropdown.lastElementChild);
      }

      // Restore previous selection if still valid
      if (currentSelection && (currentSelection === 'Draw' ||
        (currentSelection === 'White' && whitePlayer) ||
        (currentSelection === 'Black' && blackPlayer))) {
        winnerDropdown.value = currentSelection;
      }

      // Update placeholder class
      updateSelectPlaceholderClass(winnerDropdown);

      // Sync gameEnding options based on current winner selection
      try { onWinnerChange(); } catch (e) { /* ignore */ }
    }

    function onWinnerChange() {
      var winner = document.getElementById('winner').value;
      var gameEnding = document.getElementById('gameEnding');
      if (!gameEnding) return;

      // Draw-only endings
      var drawOptions = [
        { v: 'Stalemate', t: 'Stalemate' },
        { v: 'Insufficient Material', t: 'Insufficient Material' },
        { v: 'Threefold Repetition', t: 'Threefold Repetition' },
        { v: '50-Move Rule', t: '50-Move Rule' },
        { v: 'Agreement', t: 'Mutual Agreement' }
      ];

      // Non-draw endings
      var nonDrawOptions = [
        { v: 'Checkmate', t: 'Checkmate' },
        { v: 'Resignation', t: 'Resignation' },
        { v: 'Time Out', t: 'Time Out' }
      ];

      var previous = gameEnding.value;
      // Rebuild options
      var optionsHtml = '<option value="">How did it end?</option>';
      if (winner === 'Draw') {
        drawOptions.forEach(function (o) { optionsHtml += '<option value="' + o.v + '">' + o.t + '</option>'; });
      } else {
        nonDrawOptions.forEach(function (o) { optionsHtml += '<option value="' + o.v + '">' + o.t + '</option>'; });
      }
      gameEnding.innerHTML = optionsHtml;

      // Restore previous value if it's still present, otherwise clear
      var found = false;
      for (var i = 0; i < gameEnding.options.length; i++) {
        if (gameEnding.options[i].value === previous) { found = true; break; }
      }
      gameEnding.value = found ? previous : '';

      // Update placeholder class
      updateSelectPlaceholderClass(gameEnding);
    }

    // ===== FORM SUBMISSION =====

    /**
     * Handle form submission with validation and data preparation
     * @param {Event} event - The form submit event
     */
    function handleSubmit(event) {
      event.preventDefault();

      console.log('Form submission started');
      console.log('typeof google:', typeof google);
      console.log('google.script exists:', typeof google !== 'undefined' && google.script);
      console.log('google.script.run exists:', typeof google !== 'undefined' && google.script && google.script.run);

      // Check if google.script.run is available
      if (typeof google === 'undefined') {
        alert('‚ùå Google Apps Script not loaded. Please ensure you are accessing this form from the deployed Web App URL.');
        return false;
      }

      if (!google.script) {
        alert('‚ùå Google Apps Script API not available. Please try refreshing the page or using a different browser.');
        return false;
      }

      if (!google.script.run) {
        alert('‚ùå Google Apps Script run function not available. Please try refreshing the page.');
        return false;
      }

      // Basic validation
      var whitePlayer = document.getElementById('whitePlayer').value;
      var blackPlayer = document.getElementById('blackPlayer').value;
      var winner = document.getElementById('winner').value;
      var gameEnding = document.getElementById('gameEnding').value;
      var venue = document.getElementById('venue').value.trim();

      // Hide all error messages first
      var helpTexts = document.querySelectorAll('.help-text');
      for (var i = 0; i < helpTexts.length; i++) {
        helpTexts[i].classList.remove('show', 'error');
      }

      var hasErrors = false;

      if (!whitePlayer) {
        var whiteHelp = document.getElementById('white-help');
        if (whiteHelp) {
          whiteHelp.textContent = '‚ùå Please select white player';
          whiteHelp.classList.add('show', 'error');
        }
        hasErrors = true;
      }

      if (!blackPlayer) {
        var blackHelp = document.getElementById('black-help');
        if (blackHelp) {
          blackHelp.textContent = '‚ùå Please select black player';
          blackHelp.classList.add('show', 'error');
        }
        hasErrors = true;
      }

      // Check if same core player selected for both colors
      // Allow Other + Other since they can be different people
      if (whitePlayer && blackPlayer &&
        whitePlayer === blackPlayer &&
        whitePlayer !== 'Other' &&
        appConfig.players.indexOf(whitePlayer) !== -1) {
        var whiteHelp = document.getElementById('white-help');
        var blackHelp = document.getElementById('black-help');
        if (whiteHelp) {
          whiteHelp.textContent = '‚ùå Same player cannot be both white and black';
          whiteHelp.classList.add('show', 'error');
        }
        if (blackHelp) {
          blackHelp.textContent = '‚ùå Same player cannot be both white and black';
          blackHelp.classList.add('show', 'error');
        }
        hasErrors = true;
      }

      if (!winner) {
        var winnerHelp = document.getElementById('winner-help');
        if (winnerHelp) {
          winnerHelp.textContent = '‚ùå Please select winner';
          winnerHelp.classList.add('show', 'error');
        }
        hasErrors = true;
      }

      if (!gameEnding) {
        var endingHelp = document.getElementById('ending-help');
        if (endingHelp) {
          endingHelp.textContent = '‚ùå Please select how game ended';
          endingHelp.classList.add('show', 'error');
        }
        hasErrors = true;
      }

      // Venue is now optional, so no validation needed

      // Check if Other venue is selected but no text provided
      if (venue === 'Other') {
        var otherVenue = document.getElementById('otherVenue').value.trim();
        if (!otherVenue) {
          var otherVenueHelp = document.getElementById('other-venue-help');
          if (otherVenueHelp) {
            otherVenueHelp.textContent = '‚ùå Please enter venue name';
            otherVenueHelp.classList.add('show', 'error');
          }
          hasErrors = true;
        }
      }

      // Check if Other white player is selected but no text provided
      if (whitePlayer === 'Other') {
        var otherWhitePlayer = document.getElementById('otherWhitePlayer').value.trim();
        if (!otherWhitePlayer) {
          var otherWhiteHelp = document.getElementById('other-white-help');
          if (otherWhiteHelp) {
            otherWhiteHelp.textContent = '‚ùå Please enter white player name';
            otherWhiteHelp.classList.add('show', 'error');
          }
          hasErrors = true;
        }
      }

      // Check if Other black player is selected but no text provided
      if (blackPlayer === 'Other') {
        var otherBlackPlayer = document.getElementById('otherBlackPlayer').value.trim();
        if (!otherBlackPlayer) {
          var otherBlackHelp = document.getElementById('other-black-help');
          if (otherBlackHelp) {
            otherBlackHelp.textContent = '‚ùå Please enter black player name';
            otherBlackHelp.classList.add('show', 'error');
          }
          hasErrors = true;
        }
      }

      // Check if Time Limit is required when Match Ending is Time Out
      var timeLimitMinutes = document.getElementById('timeLimitMinutes').value;
      var timeLimitSeconds = document.getElementById('timeLimitSeconds').value;
      var hasTimeLimit = timeLimitMinutes !== '' || timeLimitSeconds !== '';
      var timeLimitHelp = document.getElementById('time-limit-help');

      if (gameEnding === 'Time Out' && !hasTimeLimit) {
        if (timeLimitHelp) {
          timeLimitHelp.textContent = '‚ùå Time limit required for Time Out ending';
          timeLimitHelp.classList.add('show', 'error');
        }
        hasErrors = true;
      }

      // Check if timed game is under 1 minute (only when time limit is set)
      if (hasTimeLimit) {
        var totalSeconds = (parseInt(timeLimitMinutes) || 0) * 60 + (parseInt(timeLimitSeconds) || 0);
        if (totalSeconds < 60) {
          if (timeLimitHelp) {
            timeLimitHelp.textContent = '‚ùå Timed games must be at least 1 minute';
            timeLimitHelp.classList.add('show', 'error');
          }
          hasErrors = true;
        }
      }

      if (hasErrors) {
        return false;
      }

      // Show loading state
      var submitBtn = document.querySelector('.submit-btn');
      submitBtn.textContent = 'Saving to Google Sheets...';
      submitBtn.disabled = true;
      submitBtn.style.opacity = '0.7';

      console.log('Calling addRow function...');

      // Prepare form data array
      var actualVenue = venue === 'Other' ? document.getElementById('otherVenue').value.trim() : venue;
      var actualWhitePlayer = whitePlayer === 'Other' ? document.getElementById('otherWhitePlayer').value.trim() : whitePlayer;
      var actualBlackPlayer = blackPlayer === 'Other' ? document.getElementById('otherBlackPlayer').value.trim() : blackPlayer;

      // Handle picture upload
      var pictureFile = document.getElementById('picture').files[0];
      var pictureData = '';

      if (pictureFile) {
        // Convert image to base64 for storage
        var reader = new FileReader();
        reader.onload = function (e) {
          pictureData = e.target.result; // This includes the data:image/jpeg;base64, prefix
          submitFormWithData();
        };
        reader.readAsDataURL(pictureFile);
      } else {
        submitFormWithData();
      }

      function submitFormWithData() {
        var formData = [
          actualWhitePlayer,
          actualBlackPlayer,
          winner,
          gameEnding,
          (function () {
            var minutes = document.getElementById('timeLimitMinutes').value;
            var seconds = document.getElementById('timeLimitSeconds').value;
            if (minutes === '' && seconds === '') return '';
            return (minutes || '0') + ':' + (seconds || '00').padStart(2, '0');
          })(),
          actualVenue,
          document.getElementById('brutality').value,
          document.getElementById('notes').value,
          pictureData,
          document.getElementById('whiteMulligan').checked ? 'Yes' : 'No',
          document.getElementById('blackMulligan').checked ? 'Yes' : 'No'
        ];

        try {
          var timeoutId = setTimeout(function () {
            console.error('Google Apps Script call timed out');
            alert('‚ùå Request timed out. Please check your internet connection and try again.');

            var submitBtn = document.querySelector('.submit-btn');
            submitBtn.textContent = 'Log Chess Game';
            submitBtn.disabled = false;
            submitBtn.style.opacity = '1';
          }, 30000);

          google.script.run
            .withSuccessHandler(function (result) {
              clearTimeout(timeoutId);
              onSubmitSuccess(result);
            })
            .withFailureHandler(function (error) {
              clearTimeout(timeoutId);
              console.error('Google Apps Script error:', error);
              onSubmitError(error);
            })
            .addRow(formData);

          console.log('Google Apps Script call initiated successfully');

        } catch (error) {
          console.error('Error calling google.script.run:', error);
          alert('‚ùå JavaScript error submitting form: ' + error.message + '. Please try refreshing the page.');

          var submitBtn = document.querySelector('.submit-btn');
          submitBtn.textContent = 'Log Chess Game';
          submitBtn.disabled = false;
          submitBtn.style.opacity = '1';
        }
      }

      return false;
    }

    /**
     * Handle successful form submission
     * @param {Object} result - Response from server containing timestamp
     */
    function onSubmitSuccess(result) {
      var helpTexts = document.querySelectorAll('.help-text');
      for (var i = 0; i < helpTexts.length; i++) {
        helpTexts[i].classList.remove('show', 'error');
      }

      var submitBtn = document.querySelector('.submit-btn');
      submitBtn.textContent = '‚úÖ Match Logged Successfully!';
      submitBtn.style.background = '#10b981';

      // Save venue values before resetting form
      var venueSelect = document.getElementById('venue');
      var otherVenueInput = document.getElementById('otherVenue');
      var savedVenue = venueSelect.value;
      var savedOtherVenue = otherVenueInput.value;

      // Reset form
      document.querySelector('form').reset();

      // Restore venue to continue session at same location
      venueSelect.value = savedVenue;
      otherVenueInput.value = savedOtherVenue;

      // Update venue-related UI state
      updateSelectPlaceholderClass(venueSelect);
      toggleOtherVenue(savedVenue);
      toggleMulliganSection(savedVenue);

      // Reset brutality slider and other fields
      updateBrutalitySlider('');
      toggleOtherPlayer('white', '');
      toggleOtherPlayer('black', '');

      // Reset mulligan checkboxes but keep section visible if venue requires it
      document.getElementById('whiteMulligan').checked = false;
      document.getElementById('blackMulligan').checked = false;

      setTimeout(function () {
        submitBtn.textContent = 'Log Match';
        submitBtn.style.background = 'linear-gradient(135deg, #00d4ff 0%, #7c3aed 50%, #10b981 100%)';
        submitBtn.disabled = false;
        submitBtn.style.opacity = '1';

        // Refresh session display and dropdown after successful submission
        loadSessionDropdown();
        loadCurrentSession();

        document.getElementById('whitePlayer').focus();
      }, 2000);
    }

    function onSubmitError(error) {
      alert('‚ùå Error: ' + error.message);

      var submitBtn = document.querySelector('.submit-btn');
      submitBtn.textContent = 'Log Chess Game';
      submitBtn.disabled = false;
      submitBtn.style.opacity = '1';

      console.error('Submit error:', error);
    }

    // Make functions globally accessible
    window.selectResult = selectResult;
    window.handleSubmit = handleSubmit;
    window.onSubmitSuccess = onSubmitSuccess;
    window.onSubmitError = onSubmitError;
    window.updateBrutalitySlider = updateBrutalitySlider;
    window.toggleOtherVenue = toggleOtherVenue;
    window.toggleOtherPlayer = toggleOtherPlayer;
    window.checkDuplicatePlayers = checkDuplicatePlayers;
    window.updateWinnerDropdown = updateWinnerDropdown;
    window.toggleCheckbox = toggleCheckbox;
    window.toggleMulliganSection = toggleMulliganSection;
    window.updateMulliganLabels = updateMulliganLabels;
    window.switchTab = switchTab;
    window.toggleSingleColumn = toggleSingleColumn;

    // ===== SESSION DISPLAY & ANALYTICS =====

    /**
     * Load all sessions and populate dropdown for session selection
     */
    function loadSessionDropdown() {
      google.script.run
        .withSuccessHandler(function(sessions) {
          console.log('Loaded sessions:', sessions);

          var selector = document.getElementById('session-selector');

          // Clear existing options except the first two (Most Recent and Year to Date)
          while (selector.options.length > 2) {
            selector.remove(2);
          }

          // Add session options
          if (sessions && sessions.length > 0) {
            sessions.forEach(function(session) {
              var option = document.createElement('option');
              option.value = session.id;

              // Format the option text: "1/27 Tue Night Fortaleza del..."
              var startDate = new Date(session.startTime);
              var dateStr = (startDate.getMonth() + 1) + '/' + startDate.getDate();
              var dayOfWeek = getDayOfWeek(startDate);
              var timeOfDay = getTimeOfDay(startDate);

              // Truncate venue if too long
              var venue = session.venue;
              if (venue.length > 20) {
                venue = venue.substring(0, 20) + '...';
              }

              option.textContent = dateStr + ' ' + dayOfWeek + ' ' + timeOfDay + ' ' + venue;
              selector.appendChild(option);

              console.log('Added session option:', session.id, option.textContent);
            });
          }
        })
        .withFailureHandler(function(err) {
          console.error('Failed to load sessions:', err);
        })
        .getAllSessions();
    }

    /**
     * Handle session dropdown change
     */
    function onSessionChange() {
      var selector = document.getElementById('session-selector');
      console.log('Session changed to:', selector.value, selector.selectedIndex);

      loadCurrentSession();
    }

    /**
     * Load current session data from server and display
     */
    function loadCurrentSession(event) {
      if (event) {
        event.stopPropagation();
      }

      // Get selected session ID from dropdown
      var selector = document.getElementById('session-selector');
      var selectedSessionId = selector.value || null;

      console.log('Loading session with ID:', selectedSessionId);

      // Show loading state
      var loading = document.getElementById('session-loading');
      var data = document.getElementById('session-data');
      var noData = document.getElementById('session-no-data');
      var error = document.getElementById('session-error');

      loading.style.display = 'block';
      data.style.display = 'none';
      noData.style.display = 'none';
      error.style.display = 'none';

      var successHandler = function(sessionData) {
        console.log('Received session data:', sessionData);

        loading.style.display = 'none';

        if (!sessionData) {
          console.log('No session data returned');
          noData.style.display = 'block';
          return;
        }

        // Populate session metadata
        if (selectedSessionId !== 'ytd') {
          // Format: "1/17 19 Matches at Fortalez del Arroyo Trebol on a Sunday afternoon"
          if (sessionData.startTime) {
            var startDate = new Date(sessionData.startTime);
            var month = startDate.getMonth() + 1;
            var day = startDate.getDate();
            var dayOfWeek = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'][startDate.getDay()];
            var hour = startDate.getHours();
            
            // Determine time of day
            var timeOfDay = 'morning';
            if (hour >= 12 && hour < 17) {
              timeOfDay = 'afternoon';
            } else if (hour >= 17 && hour < 21) {
              timeOfDay = 'evening';
            } else if (hour >= 21 || hour < 6) {
              timeOfDay = 'night';
            }
            
            var description = month + '/' + day + ' <span class="match-count">' + sessionData.matchCount + ' Matches</span> at <span class="venue">' + (sessionData.venue || 'Unknown') + '</span> on a <span class="day-of-week">' + dayOfWeek + '</span> <span class="time-of-day">' + timeOfDay + '</span>';
            document.getElementById('session-description').innerHTML = description;
          }
        } else {
          // For YTD: "2026: 54 Matches over 5 Sessions"
          var year = new Date().getFullYear();
          var description = year + ': <span class="match-count">' + sessionData.matchCount + ' Matches</span> over <span class="session-count">' + sessionData.sessionCount + ' Sessions</span>';
          document.getElementById('session-description').innerHTML = description;
        }

        // Populate color breakdown
        populateColorBreakdown(sessionData);

        // Populate player stats table
        populateStatsTable(sessionData.playerStats);

        data.style.display = 'block';
      };

      var errorHandler = function(err) {
        loading.style.display = 'none';
        error.style.display = 'block';
        console.error('Failed to load session data:', err);
      };

      // Call appropriate server function
      if (selectedSessionId === 'ytd') {
        google.script.run
          .withSuccessHandler(successHandler)
          .withFailureHandler(errorHandler)
          .getYearToDateStats();
      } else {
        google.script.run
          .withSuccessHandler(successHandler)
          .withFailureHandler(errorHandler)
          .getCurrentSessionData(selectedSessionId);
      }
    }

    /**
     * Toggle session display collapsed/expanded
     */
    /**
     * Toggle single-column layout mode
     */
    function toggleSingleColumn() {
      var container = document.querySelector('.form-container');
      var subtitle = document.querySelector('.subtitle');
      var isEnteringSingleColumn = !container.classList.contains('single-column');

      container.classList.toggle('single-column');

      if (isEnteringSingleColumn) {
        subtitle.textContent = 'Single-column mode ‚Ä¢ Tap title to switch back';
      } else {
        subtitle.textContent = 'New and improved with live session tracking';
      }
    }

    /**
     * Switch between tabs
     */
    function switchTab(tabName) {
      // Remove active class from all tabs and buttons
      var tabButtons = document.querySelectorAll('.tab-button');
      var tabContents = document.querySelectorAll('.tab-content');

      for (var i = 0; i < tabButtons.length; i++) {
        tabButtons[i].classList.remove('active');
      }

      for (var i = 0; i < tabContents.length; i++) {
        tabContents[i].classList.remove('active');
      }

      // Add active class to selected tab and button
      if (tabName === 'stats') {
        document.getElementById('stats-tab').classList.add('active');
        tabButtons[0].classList.add('active');
      } else if (tabName === 'form') {
        document.getElementById('form-tab').classList.add('active');
        tabButtons[1].classList.add('active');
      }
    }

    /**
     * Populate white vs black wins breakdown as bar chart with draws
     */
    function getPercentageClass(percent) {
      if (percent <= 25) return 'percent-low';
      if (percent <= 50) return 'percent-medium';
      if (percent <= 75) return 'percent-high';
      return 'percent-excellent';
    }

    function populateColorBreakdown(sessionData) {
      var container = document.getElementById('color-breakdown');
      container.innerHTML = '';

      if (!sessionData.whiteWins && !sessionData.blackWins && !sessionData.draws) {
        return; // No data to display
      }

      var whiteWins = sessionData.whiteWins || 0;
      var blackWins = sessionData.blackWins || 0;
      var draws = sessionData.draws || 0;
      var totalGames = whiteWins + blackWins + draws;

      if (totalGames === 0) {
        return; // No games to display
      }

      var whitePercent = Math.round((whiteWins / totalGames) * 100);
      var blackPercent = Math.round((blackWins / totalGames) * 100);
      var drawsPercent = Math.round((draws / totalGames) * 100);

      var barContent = '';
      if (whiteWins > 0) {
        barContent += '<div class="color-bar-segment white" style="flex: ' + whitePercent + ';">' +
          '<span class="segment-count">‚ö™ ' + whiteWins + '</span>' +
          '<span class="segment-percent ' + getPercentageClass(whitePercent) + '">' + whitePercent + '%</span>' +
        '</div>';
      }
      if (blackWins > 0) {
        barContent += '<div class="color-bar-segment black" style="flex: ' + blackPercent + ';">' +
          '<span class="segment-count">‚ö´ ' + blackWins + '</span>' +
          '<span class="segment-percent ' + getPercentageClass(blackPercent) + '">' + blackPercent + '%</span>' +
        '</div>';
      }
      if (draws > 0) {
        barContent += '<div class="color-bar-segment draws" style="flex: ' + drawsPercent + ';">' +
          '<span class="segment-count">ü§ù ' + draws + '</span>' +
          '<span class="segment-percent ' + getPercentageClass(drawsPercent) + '">' + drawsPercent + '%</span>' +
        '</div>';
      }

      container.innerHTML = '<div class="color-breakdown-bar">' + barContent + '</div>';
    }

    /**
     * Populate player stats with bar chart infographic
     */
    function populateStatsTable(playerStats) {
      var grid = document.getElementById('session-stats-grid');
      grid.innerHTML = '';

      if (!playerStats || playerStats.length === 0) {
        grid.innerHTML = '<div style="text-align: center; padding: 20px; color: rgba(248, 249, 250, 0.5); font-style: italic;">No player stats available</div>';
        return;
      }

      // Use configured player colors from appConfig
      var colorMap = {};
      
      // Assign colors from configuration
      playerStats.forEach(function(stat) {
        if (appConfig.playerColors[stat.player]) {
          colorMap[stat.player] = appConfig.playerColors[stat.player];
        }
      });

      // Sort by wins descending
      playerStats.sort(function(a, b) {
        return b.wins - a.wins;
      });

      // Fallback colors for players not in config
      var fallbackColors = ['#7c3aed', '#00d4ff', '#10b981', '#f59e0b', '#ec4899', '#06b6d4'];
      var colorIndex = 0;
      playerStats.forEach(function(stat) {
        if (!colorMap[stat.player]) {
          colorMap[stat.player] = fallbackColors[colorIndex % fallbackColors.length];
          colorIndex++;
        }
      });

      playerStats.forEach(function(stat) {
        var color = colorMap[stat.player];
        var totalGames = stat.matches || 0;
        var wins = stat.wins || 0;
        var losses = stat.losses || 0;
        var draws = stat.draws || 0;
        var winRate = totalGames > 0 ? Math.round((wins / totalGames) * 100) : 0;

        // Calculate bar widths as percentages
        var winsWidth = totalGames > 0 ? (wins / totalGames) * 100 : 0;
        var lossesWidth = totalGames > 0 ? (losses / totalGames) * 100 : 0;
        var drawsWidth = totalGames > 0 ? (draws / totalGames) * 100 : 0;

        var card = document.createElement('div');
        card.className = 'stat-card';
        
        var winsText = wins + 'W';
        var lossesText = losses + 'L';
        var drawsText = draws + 'D';

        card.innerHTML = 
          '<div class="stat-card-header">' +
            '<span class="stat-card-name" style="color: ' + color + ';">' + stat.player + '</span>' +
            '<span class="stat-total">' + totalGames + ' total games</span>' +
            '<div class="stat-brutality" style="margin-left: auto;">' +
              '<div class="stat-brutality-item"><span>üó°Ô∏è</span><span>' + (stat.inflicted || 0) + '</span></div>' +
              '<div class="stat-brutality-item"><span>üò≠</span><span>' + (stat.suffered || 0) + '</span></div>' +
            '</div>' +
          '</div>' +
          '<div class="stat-bar-wrapper">' +
            '<div class="stat-bar-container">' +
              '<div class="stat-bar" style="--player-color: ' + color + ';">' +
                (winsWidth > 5 ? '<div class="stat-bar-segment wins" style="--wins-width: ' + winsWidth + '%; --losses-width: ' + lossesWidth + '%; --draws-width: ' + drawsWidth + '%;">' + winsText + '</div>' : '') +
                (lossesWidth > 5 ? '<div class="stat-bar-segment losses" style="--wins-width: ' + winsWidth + '%; --losses-width: ' + lossesWidth + '%; --draws-width: ' + drawsWidth + '%;">' + lossesText + '</div>' : '') +
                (draws > 0 ? '<div class="stat-bar-segment draws" style="--wins-width: ' + winsWidth + '%; --losses-width: ' + lossesWidth + '%; --draws-width: ' + Math.max(drawsWidth, 2) + '%;">' + drawsText + '</div>' : '') +
              '</div>' +
            '</div>' +
            '<span class="stat-winrate" style="--player-color: ' + color + ';">' + winRate + '%</span>' +
          '</div>';
        
        grid.appendChild(card);
      });
    }

    /**
     * Format last match text
     */
    function formatLastMatchText(lastMatch) {
      if (!lastMatch) return;

      var matchDate = new Date(lastMatch.timestamp);
      var timeSince = formatTimeSince(matchDate);
      var resultText = '';

      if (lastMatch.winner === 'Draw') {
        resultText = lastMatch.whitePlayer + ' (White) drew with ' + lastMatch.blackPlayer + ' (Black)';
      } else {
        var winner = (lastMatch.winner === 'White') ? lastMatch.whitePlayer : lastMatch.blackPlayer;
        var loser = (lastMatch.winner === 'White') ? lastMatch.blackPlayer : lastMatch.whitePlayer;
        resultText = winner + ' (' + lastMatch.winner + ') defeated ' + loser;
      }

      document.getElementById('session-last-match-text').textContent =
        'Last match: ' + resultText + ' ‚Äî ' + timeSince;
    }

    /**
     * Format time as "3:45 PM"
     */
    function formatTime(date) {
      var hours = date.getHours();
      var minutes = date.getMinutes();
      var ampm = hours >= 12 ? 'PM' : 'AM';
      hours = hours % 12;
      hours = hours ? hours : 12;
      minutes = minutes < 10 ? '0' + minutes : minutes;
      return hours + ':' + minutes + ' ' + ampm;
    }

    /**
     * Format duration in minutes as "2h 30m" or "45 mins"
     */
    function formatDuration(minutes) {
      if (minutes < 60) {
        return minutes + ' min' + (minutes !== 1 ? 's' : '');
      }
      var hours = Math.floor(minutes / 60);
      var mins = minutes % 60;
      return hours + 'h ' + mins + 'm';
    }

    /**
     * Format time since as "just now", "15 mins ago", etc.
     */
    function formatTimeSince(date) {
      var now = new Date();
      var diffMs = now - date;
      var diffMins = Math.floor(diffMs / 60000);

      if (diffMins < 1) return 'just now';
      if (diffMins < 60) return diffMins + ' min' + (diffMins !== 1 ? 's' : '') + ' ago';

      var diffHours = Math.floor(diffMins / 60);
      if (diffHours < 24) {
        var mins = diffMins % 60;
        return diffHours + 'h ' + mins + 'm ago';
      }

      return 'over a day ago';
    }

    /**
     * Get day of week abbreviation (Mon, Tue, Wed, etc.)
     */
    function getDayOfWeek(date) {
      var days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
      return days[date.getDay()];
    }

    /**
     * Get time of day (Morning, Afternoon, Evening, Night)
     */
    function getTimeOfDay(date) {
      var hour = date.getHours();
      if (hour >= 5 && hour < 12) return 'Morning';
      if (hour >= 12 && hour < 17) return 'Afternoon';
      if (hour >= 17 && hour < 21) return 'Evening';
      return 'Night';
    }

    // ===== End Current Session Display Functions =====

    // Mobile browser compatibility check
    function checkGoogleScriptAvailability() {
      setTimeout(function () {
        if (typeof google === 'undefined' || !google.script || !google.script.run) {
          console.warn('Google Apps Script API not fully loaded. This may affect form submission on mobile browsers.');
        } else {
          console.log('Google Apps Script API loaded successfully');
        }
      }, 3000);
    }

    // Initialize brutality slider on page load
    updateBrutalitySlider(0);

    checkGoogleScriptAvailability();

    // Load current session data and populate dropdown on page load
    window.addEventListener('load', function() {
      loadSessionDropdown();
      loadCurrentSession();
    });
  </script>
</body>

</html>